{% extends "base.html" %}

{% block content %}
  <a href="{{ url_for('index') }}">To index</a>
  {% if current_user==post.author %}
  <a href="{{ url_for('edit_post', post_id=post.id) }}">Edit</a>
  {% endif %}
  <hr>

  <h3>{{ post.title }}</h3>
  <p>{{ post.body }}</p>

  {% if current_user==post.author %}
  <p>by you</p>
  {% else %}
  <p>by <a href="{{ url_for('view_profile', user_id=current_user.id) }}">{{ post.author.username }}</a></p>
  {% endif %}

  {% for comment in comments %}
  <p>{{ comment.author.username}} said: {{ comment.body }}</p>
  {% endfor %}

  {% if current_user.is_authenticated and form %}
  <form action="" method="post">
    {{ form.hidden_tag() }}
    <p>
        {{ form.body.label }} <br>
        {{ form.body(cols=32, rows=4) }} <br>
        {% for error in form.body.errors %}
        <span style="color: red;">[{{ error }}]</span>
        {% endfor %}
    </p>
    <p>{{ form.submit() }}</p>
  </form>
  {% endif %}
{% endblock %}
